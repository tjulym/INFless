
%boxplot箱线图1

clc
clear
fontsize=16;
load LatencyVarCPU
load LatencyVarGPU
%data_100=xlsread('boxplot_CPUcostatperiod.xls');
% data=data_100/100;
data2=LatencyVarGPU;
data=LatencyVarCPU;
data(isnan(data))=0; %将数据中的NAN替换为0
data2(isnan(data2))=0; %将数据中的NAN替换为0 
figure1 = figure;
axes1 = axes('Parent',figure1,'YGrid','on');
hold(axes1,'all');
 
plot([-1 -1],[-2 -2],'s','LineWidth',2,... %线型为红色bai虚线，marker为方框，线粗细设定为2
'MarkerEdgeColor',[255,127,127]/255,... %marker边缘颜色设du定为黑色
'MarkerFaceColor',[255,127,127]/255,... %marker内部颜色设定为绿色
'MarkerSize',16)
hold on 
plot([-1 -1],[-2 -2],'s','LineWidth',2,... %线型为红色bai虚线，marker为方框，线粗细设定为2
'MarkerEdgeColor',[127,255,127]/255,... %marker边缘颜色设du定为黑色
'MarkerFaceColor',[127,255,127]/255,... %marker内部颜色设定为绿色
'MarkerSize',16)
hold on 

bone_class_f=[data(:,1);data(:,2);data(:,3);data(:,4);data(:,5)]; % combine into a column 
G_f = [zeros(size(data(:,1)))+1;zeros(size(data(:,2)))+2;zeros(size(data(:,3)))+3;zeros(size(data(:,4)))+4;zeros(size(data(:,5)))+5]; 
%box = boxplot(bone_class_f,G_f, 'boxstyle' ,'filled');
box1 = boxplot(bone_class_f,G_f,'Colors','kkkk','positions',1.2:1:5.2,'width',0.3,'symbol','');

% set(gca,'YLim',[0.15 0.35])
% set(gca,'YTick',[0.15: 0.05: 0.35])
% set(gca,'YTickLabel',{'15%','20%','25%','30%','35%'}, 'Fontsize',fontsize,'linewidth',2);
 

bone_class_f2=[data2(:,1);data2(:,2);data2(:,3);data2(:,4);data2(:,5)]; % combine into a column 
G_f2 = [zeros(size(data2(:,1)))+1;zeros(size(data2(:,2)))+2;zeros(size(data2(:,3)))+3;zeros(size(data2(:,4)))+4;zeros(size(data2(:,5)))+5]; 
box2 = boxplot(bone_class_f2,G_f2,'Colors','kkkk','positions',0.8:1:4.8,'width',0.3,'symbol','');
% h1 = findobj(gca,'Tag','Box');
% colorlist ={'r','r','r','r','r'};
% for m=1:length(h1)
%     patch(get(h1(m),'XData'),get(h1(m),'YData'),cell2mat(colorlist(m)),'FaceAlpha',.5);
% end

h = findobj(gca,'Tag','Box'); 
colorlist ={'r','r','r','r','r','g','g','g','g','g'};
for m=1:length(h)
    patch(get(h(m),'XData'),get(h(m),'YData'),cell2mat(colorlist(m)),'FaceAlpha',.5);
end
set(box1,'lineWidth',1)
set(box2,'lineWidth',1)
xlabel('DNN Models','Fontsize',fontsize);
ylabel('Latency (ms)','Fontsize',fontsize);
set(gca,'xcolor',[0 0 0],'Fontsize',fontsize);
set(gca,'ycolor',[0 0 0],'Fontsize',fontsize);
set(gca,'XLim',[0.5 5.5])
set(gca,'YLim',[0 100])
set(gca, 'YTick', [0 25 50 75 100]); % 添加X轴的记号点 
set(gca, 'XTick', [1,2,3,4,5]); % 添加X轴的记号点
set(gca,'XTickLabel',{'resnet-50','mobilenet','lstm-2365','catdog','yamnet'},'Fontsize',fontsize);
set(gca,'units','normalized','position',[0.12 0.22 0.85 0.75],'box','on','YScale','log')
set(gca, 'GridLineStyle', ':','ticklength',[0.005 0]) 
set(gcf,'position',[200 200 600 300]) %分别代表x轴长度,y轴长度,图像长度,图像高度
grid on
ll=legend('CPU+GPU','CPU')
set(ll,'Fontsize',14,'Orientation','horizon')
grid on;
set(gca,'GridLineStyle','--','GridAlpha',.1)
% 创建 textbox
annotation(figure1,'textbox',...
    [0.468333333333337 0.545666668752834 0.0783333314955235 0.103333331247171],...
    'String','17.4%',...
    'LineStyle','none',...
    'FontSize',12,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.258333333333334 0.884000020861655 0.0933333310484887 0.103333331247171],...
    'String','4.2%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.371666666666668 0.859000002086167 0.0933333310484887 0.103333331247171],...
    'String','3.8%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.305000000000002 0.751666668752835 0.0783333314955236 0.103333331247171],...
    'String','2.4%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.136666666666668 0.77900000208617 0.0933333310484888 0.103333331247171],...
    'String','21%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.543333333333335 0.399000002086166 0.0933333310484887 0.103333331247171],...
    'String','8.8%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.643333333333335 0.259000002086166 0.0933333310484886 0.103333331247171],...
    'String','8.6%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.715000000000003 0.2723333354195 0.0933333310484887 0.103333331247171],...
    'String','9.6%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.815000000000003 0.285666668752833 0.093333331048489 0.103333331247171],...
    'String','7.6%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');

% 创建 textbox
annotation(figure1,'textbox',...
    [0.888333333333336 0.495666668752833 0.0783333314955238 0.103333331247171],...
    'String','4%',...
    'LineStyle','none',...
    'FontSize',14,...
    'FitBoxToText','off');
 